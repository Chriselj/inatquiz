<!DOCTYPE html>
<html>
  <head>
    <title>Plant and Animal Knowledge Test</title>
    <style>
      /* General IRC-themed styling */
      body {
        font-family: 'Arial', sans-serif;
        background-color: #f8f9f3;
        color: #2e3b1f;
        margin: 0;
        padding: 0;
        text-align: center;
      }

      h1 {
        color: #5c7633;
      }

      i {
        color: #8b9b62;
      }

      label {
        font-weight: bold;
        margin-right: 10px;
      }

      input[type="text"],
      select {
        padding: 8px;
        margin: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
      }

      button {
        padding: 10px 20px;
        background-color: #5c7633;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      button:hover {
        background-color: #486328;
      }

      /* Loading bar styles */
      #loadingBar {
        width: 100%;
        background-color: #e0e5d9;
        border: 1px solid #c8d1b8;
        display: none;
      }

      #loadingBar div {
        height: 30px;
        width: 0;
        background-color: #8b9b62;
        text-align: center;
        line-height: 30px;
        color: white;
      }

      .image-container {
        display: inline-block;
        text-align: center;
        margin: 10px;
      }

      .image-container img {
        width: 300px;
        height: auto;
        cursor: pointer;
        border-radius: 10px;
        transition: transform 0.3s ease;
      }

      .image-container img:hover {
        transform: scale(1.05);
      }

      .attribution {
        text-align: center;
        margin-top: 20px;
      }

      .attribution img {
        width: 175px;
        height: auto;
      }

      /* Modal styling */
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 60px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
      }

      .modal-content {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 700px;
      }

      .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
      }

      .close:hover,
      .close:focus {
        color: #bbb;
        cursor: pointer;
      }

      .quiz-form {
        margin-top: 20px;
      }

      #speciesName {
        font-size: 20px;
        color: #5c7633;
        font-weight: bold;
        margin-top: 20px;
      }
    </style>
  </head>

  <body>
    <h1>Plant and Animal Knowledge Test</h1>
    <i>Created by Irvine Ranch Conservancy's monitoring team for staff and volunteer training.</i>
    <br><br>

    <!-- Remaining HTML code (unchanged) -->

    <script>
      async function getAIExplanation(prompt) {
        try {
          const response = await fetch('https://your-site-name.netlify.app/.netlify/functions/openai-quiz', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ prompt: prompt })
          });
          const data = await response.json();
          return data.message;
        } catch (error) {
          console.error('Error fetching AI response:', error);
          return 'Sorry, there was an issue fetching the explanation.';
        }
      }

      document.getElementById('revealButton').onclick = async function () {
        const correctSpecies = document.getElementById('quizForm').dataset.correctSpecies;
        const commonName = document.getElementById('quizForm').dataset.commonName;
        
        document.getElementById('speciesName').innerText = 'Fetching explanation...';
        document.getElementById('speciesName').style.display = 'block';

        const prompt = `Provide an explanation for the species ${correctSpecies}, known as ${commonName}.`;
        const explanation = await getAIExplanation(prompt);
        
        document.getElementById('speciesName').innerText = `Common Name: ${commonName}\nScientific Name: ${correctSpecies}\nExplanation: ${explanation}`;
      };
    </script>
  </body>
</html>
